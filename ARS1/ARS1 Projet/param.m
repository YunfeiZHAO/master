clear all
close all
clc

% gains of speed of concergence
K1 = 1;
K5 = 5;
K20 = 20;

% initial coordinates
start = [0;1.5;0;-1.5;-3;3;-3;0;-3;-3];

% destination coordinates
d1 = [34,0;31,0;28,0;25,0;22,0];
d2 = [22,0;28,0;31,0;34,0;25,0];

% defination of u
% u = k * (A * position + D);

% matrix A for the 5 connections model
A5 = [-2,0,0,0,0,0,0,0,1,0;
      0,-2,0,0,0,0,0,0,0,1;
      1,0,-1,0,0,0,0,0,0,0;
      0,1,0,-1,0,0,0,0,0,0;
      0,0,1,0,-1,0,0,0,0,0;
      0,0,0,1,0,-1,0,0,0,0;
      0,0,0,0,1,0,-1,0,0,0;
      0,0,0,0,0,1,0,-1,0,0;
      0,0,0,0,0,0,1,0,-1,0;
      0,0,0,0,0,0,0,1,0,-1];
  
% matrix A for the 4 connections model
A4 = [-1,0,0,0,0,0,0,0,0,0;
      0,-1,0,0,0,0,0,0,0,0;
      1,0,-1,0,0,0,0,0,0,0;
      0,1,0,-1,0,0,0,0,0,0;
      0,0,1,0,-1,0,0,0,0,0;
      0,0,0,1,0,-1,0,0,0,0;
      0,0,0,0,1,0,-1,0,0,0;
      0,0,0,0,0,1,0,-1,0,0;
      0,0,0,0,0,0,1,0,-1,0;
      0,0,0,0,0,0,0,1,0,-1];

%5 connections for the first destination
D1_5 = [(d1(1,1)-d1(5,1))+d1(1,1);
        (d1(1,2)-d1(5,2))+d1(1,2);
        d1(2,1)-d1(1,1);
        0;
        d1(3,1)-d1(2,1);
        0;
        d1(4,1)-d1(3,1);
        0;
        d1(5,1)-d1(4,1);
        0];
%5 connections for the second destination
D2_5 = [(d2(1,1)-d2(5,1))+d2(1,1);
        (d2(1,2)-d2(5,2))+d2(1,2);
        d2(2,1)-d2(1,1);
        0;
        d2(3,1)-d2(2,1);
        0;
        d2(4,1)-d2(3,1);
        0;
        d2(5,1)-d2(4,1);
        0];
% 4 connections for the fisrt destination
D1_4 = [d1(1,1);
        d1(1,2);
        d1(2,1)-d1(1,1);
        0;
        d1(3,1)-d1(2,1);
        0;
        d1(4,1)-d1(3,1);
        0;
        d1(5,1)-d1(4,1);
        0];
    
% 4 connections for the second destination
D2_4 = [d2(1,1);
        d2(1,2);
        d2(2,1)-d2(1,1);
        0;
        d2(3,1)-d2(2,1);
        0;
        d2(4,1)-d2(3,1);
        0;
        d2(5,1)-d2(4,1);
        0];
    
% continue going with platooning form with constant speed
v = 1;

A_C = [0,0,0,0,0,0,0,0,0,0;
       0,0,0,0,0,0,0,0,0,0;
       1,0,-1,0,0,0,0,0,0,0;
       0,1,0,-1,0,0,0,0,0,0;
       0,0,1,0,-1,0,0,0,0,0;
       0,0,0,1,0,-1,0,0,0,0;
       0,0,0,0,1,0,-1,0,0,0;
       0,0,0,0,0,1,0,-1,0,0;
       0,0,0,0,0,0,1,0,-1,0;
       0,0,0,0,0,0,0,1,0,-1];
          
D_C = [v;
       0;
       d1(2,1)-d1(1,1);
       0;
       d1(3,1)-d1(2,1);
       0;
       d1(4,1)-d1(3,1);
       0;
       d1(5,1)-d1(4,1);
       0];

  
   